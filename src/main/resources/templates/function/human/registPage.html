<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>인사 정보 등록</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        /* 전체 컨테이너 */
        .regist-div-class {
            width: 1000px;
            border: 1px solid black;
            margin: auto;
            padding: 20px;
            background-color: #f9f9f9;
            position: relative;
            height: 500px;
        }

        /* 제목 스타일 */
        .header {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        /* 취소 버튼 */
        .cancle-button {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 5px 10px;
        }

        /* 사진 및 테이블 영역 */
        .content-wrapper {
            display: flex;
            gap: 20px;
        }

        /* 사진 영역 */
        .photo {
            width: 150px;
            height: 200px;
            border: 1px solid black;
            text-align: center;
            line-height: 200px;
            background-color: white;
            flex-shrink: 0;
        }

        /*!* 테이블 영역 *!*/
        /*table {*/
        /*    border-collapse: collapse;*/
        /*    width: 100%;*/
        /*    background-color: white;*/
        /*    text-align: center;*/
        /*}*/

        /*table th, table td {*/
        /*    border: 1px solid black;*/
        /*    padding: 5px;*/
        /*    vertical-align: middle;*/
        /*}*/

        /* 입력 필드 스타일 */
        input[type="text"], input[type="email"], input[type="number"], input[type="tel"] {
            width: 80%;
            height: 30px;
            box-sizing: border-box;
            padding: 5px;
        }

        /* 등록 버튼 */
        .submit-button {
            margin-top: 20px;
            padding: 5px 10px;
            float: right;
        }
        .submit-button:hover {
            background-color: gray;
        }
        .cancle-button:hover {
            background-color: gray;
        }
    </style>
</head>
<body>
<form action="/employee/regist" method="post" onsubmit="combineEmail(); return true;">
    <div class="regist-div-class">
        <!-- 상단 제목 및 취소 버튼 -->
        <div class="header">인사 정보 등록</div>
        <button type="button" class="cancle-button">취소</button> <!-- 나중에 연결 예정 -->

        <!-- 사진 및 테이블 -->
        <div class="content-wrapper">
            <!-- 사진 영역 -->
            <div class="photo" aria-placeholder="사진">사 진</div>
            <div>
            <div>
                <label>사원명 : </label>
                <input type="text" name="name" placeholder="이름"><button>중복 확인</button>
            </div>
            <div class="domain__selected">
                <label for="department">부 서 : </label>
<!--                <input type="text" name="department" placeholder="영업1팀">-->
                <select name="department" id="department">
                    <option value="인사팀">인사팀</option>
                    <option value="영업1팀">영업1팀</option>
                    <option value="영업2팀">영업2팀</option>
                    <option value="영업3팀">영업3팀</option>
                    <option value="총무팀">총무팀</option>
                    <option value="시설팀">시설팀</option>
                </select>
            </div>

            <div>
                <label for="position">직 책 : </label>
<!--                <input type="text" name="position" placeholder="직책">-->
                <select name="position" id="position">
                    <option value="인턴">인턴</option>
                    <option value="사원">사원</option>
                    <option value="대리">대리</option>
                    <option value="과장">과장</option>
                    <option value="차장">차장</option>
                    <option value="부장">부장</option>
                </select>
            </div>
            <div>
                <label>사 번 : </label>
                <input type="number" name="id" placeholder="사번">
            </div>

            <div>
                <label>대표 전화 :</label>
                <input type="tel" name="phoneNumber" placeholder="대표 전화">
            </div>
            <div>
                <label>생년 월일 : </label>
                <input type="date" name="date" placeholder="생년 월일">
                <input type="month" name="date" placeholder="생년 월일">
            </div>

            <div  class="field-group">
                <label>이메일 :</label>
                <div style="display: flex; gap: 5px">
                <input type="text" name="emailName" placeholder="이메일">
                @
                <select name="emailDomain" id="emailDomain">
                    <option value="naver.com">naver.com</option>
                    <option value="google.com">google.com</option>
                    <option value="daum.net">daum.net</option>
                    <option value="직접 입력">직접 입력</option>
                </select>
                    <input type="text" id="customEmailDomain" name="customEmailDomain" placeholder="도메인 입력" style="display: none; margin-top: 5px;">
                    <!-- Hidden field to send full email -->
                    <input type="hidden" id="fullEmail" name="email">
                </div>
            </div>

        </div>
            <!-- 테이블 -->
<!--            <table>-->
<!--                <tr>-->
<!--                    <th>이 름</th>-->
<!--                    <th>소 속</th>-->
<!--                    <td>-->
<!--&lt;!&ndash;                        <input type="text" name="department" placeholder="영업부">&ndash;&gt;-->
<!--                        <select name="department" id="department">-->
<!--                            <option value="인사팀">인사팀</option>-->
<!--                            <option value="영업1팀">영업1팀</option>-->
<!--                            <option value="영업2팀">영업2팀</option>-->
<!--                            <option value="영업3팀">영업3팀</option>-->
<!--                            <option value="총무팀">총무팅</option>-->
<!--                            <option value="시설팀">시설팀</option>-->
<!--                        </select>-->
<!--                    </td>-->
<!--                    <th>직 책</th>-->
<!--                    <td>-->
<!--                        <select name="position" id="positionSelect">-->
<!--                            <option value="인턴">인턴</option>-->
<!--                            <option value="사원">사원</option>-->
<!--                            <option value="대리">대리</option>-->
<!--                            <option value="과장">과장</option>-->
<!--                            <option value="차장">차장</option>-->
<!--                            <option value="부장">부장</option>-->
<!--                        </select>-->
<!--                    </td>-->
<!--                </tr>-->
<!--                <tr>-->
<!--                    <th rowspan="3"><input type="text" name="name" placeholder="홍길동"></th>-->
<!--                    <th>사 번</th>-->
<!--                    <td><input type="number" name="id" placeholder="2412001"><button>중복 확인</button></td>-->
<!--                    <th>대표 전화</th>-->
<!--                    <td><input type="tel" name="phoneNumber" placeholder="010-1234-5678"></td>-->

<!--                </tr>-->
<!--                <tr>-->
<!--                    <th>이메일</th>-->
<!--                    <td><input type="text" name="email" placeholder="hongildong">-->
<!--                        @-->
<!--                        <select name="emailDomain" id="emailDomain">-->
<!--                            <option value="naver.com">naver.com</option>-->
<!--                            <option value="gmail.com">gmail.com</option>-->
<!--                            <option value="daum.net">daum.net</option>-->
<!--                            <option value="self">직접 입력</option>-->
<!--                        </select>-->
<!--                        <input type="text" id="customEmailDomain" name="customEmailDomain" placeholder="도메인 입력" style="display: none; width: 40%; margin-top: 5px;">-->
<!--                    </td>-->
<!--                    <th>내선 번호</th>-->
<!--                    <td><input type="tel" name="extension" placeholder="02-052-2373"></td>-->
<!--                </tr>-->
<!--                <tr>-->
<!--                    <th>주 소</th>-->
<!--                    <td colspan="3"><input type="text" name="address" placeholder="서울시 강남구 -"></td>-->
<!--                </tr>-->
<!--            </table>-->
        </div>
        <!-- 하단 등록 버튼 -->
        <button type="submit" class="submit-button">등록</button>
    </div>
</form>

    <!-- 모달 구조 -->
    <div th:if="${successMessage}" id="successMessage" th:text="${successMessage}" style="display: none;"></div>
    <div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="myModalLabel">알림</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="modalMessage">
                    <!-- 메시지가 동적으로 추가됩니다 -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                </div>
            </div>
        </div>
    </div>

<script>
    // 이메일 도메인 선택 시 "직접 입력" 활성화
    document.getElementById('emailDomain').addEventListener('change', function () {
        const customEmailDomain = document.getElementById('customEmailDomain');
        if (this.value === "직접 입력") {
            customEmailDomain.style.display = "inline-block";
            customEmailDomain.focus();
        } else {
            customEmailDomain.style.display = "none";
            customEmailDomain.value = "";
        }
    });

    function combineEmail() {
        const emailName = document.getElementById('emailName').value;
        const emailDomain = document.getElementById('emailDomain').value;
        const customDomain = document.getElementById('customEmailDomain').value;

        // 도메인이 "직접 입력"일 경우 커스텀 도메인 사용
        const fullEmail = emailName + "@" + (emailDomain === "직접 입력" ? customDomain : emailDomain);

        // hidden input에 저장
        document.getElementById('fullEmail').value = fullEmail;
        console.log("전체 이메일:", fullEmail);
    }
</script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // 서버에서 전달받은 successMessage를 가져옴
            const successMessage = document.getElementById('successMessage').textContent.trim();

            if (successMessage) {
                // 모달 메시지에 설정
                const modalMessage = document.getElementById('modalMessage');
                modalMessage.textContent = successMessage;

                // Bootstrap 모달 표시
                const myModal = new bootstrap.Modal(document.getElementById('myModal'));
                myModal.show();
            }
        });
    </script>

</body>
</html>