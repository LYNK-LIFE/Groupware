<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.semi.lynk.function.electronic_payment.model.dao.PaymentMapper">

    <resultMap id="listResultMap" type="com.semi.lynk.function.electronic_payment.model.dto.ApproveDTO">
        <id property="approver" column="approver"/>
        <result property="authoMemo" column="autho_memo"/>
        <result property="draftNo" column="draft_no"/>
        <result property="employeeNo" column="employee_no"/>
    </resultMap>

    <!-- 결재 리스트 가져오기 -->
    <select id="draftApprove" resultMap="listResultMap">
        SELECT
            approver,
            autho_memo,
            draft_no,
            employee_no
        FROM
            approve
    </select>

    <!-- 모든 직원 리스트 가져오기 -->
    <resultMap id="findResultMap" type="com.semi.lynk.function.electronic_payment.model.dto.EmployeeDTO">
      <id property="employeeNo" column="employee_no"/>
        <result property="password" column="password"/>
        <result property="employeeName" column="employee_name"/>
        <result property="email" column="email"/>
        <result property="memberStatus" column="member_status"/>
        <result property="loginFailCount" column="loginFail_count"/>
        <result property="workingStatus" column="working_status"/>
        <result property="departmentNo" column="department_no"/>
        <result property="image" column="image"/>
    </resultMap>

    <select id="findAllEmployees" resultMap="findResultMap">
        SELECT
            employee_no,
            employee_name,
            department_no
        FROM
            employee
    </select>

    <!-- 결재선 추가 -->
    <insert id="insertApprover">
        INSERT INTO approve (approver, autho_memo, draft_no, employee_no)
        VALUES (#{approver}, #{authoMemo}, #{draftNo}, #{employeeNo})
    </insert>
</mapper>